<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Vendors - Xiri Dashboard</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #0284c7;
        }
        button:disabled {
            background: #94a3b8;
            cursor: not-allowed;
        }
        #output {
            margin-top: 20px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .success { color: #059669; }
        .error { color: #dc2626; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üå± Seed Test Vendors</h1>
        <p>This will add 8 test vendors to your Firestore emulator for testing bulk delete functionality.</p>
        
        <button id="seedBtn" onclick="seedVendors()">Seed Vendors</button>
        <button onclick="clearOutput()">Clear Output</button>
        
        <div id="output"></div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp, connectFirestoreEmulator } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "demo-api-key",
            authDomain: "demo-project.firebaseapp.com",
            projectId: "xiri-facility-solutions"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Connect to emulator
        connectFirestoreEmulator(db, 'localhost', 8080);

        const testVendors = [
            {
                businessName: "Clean Pro Services",
                contactName: "John Smith",
                email: "john@cleanpro.com",
                phone: "(555) 123-4567",
                city: "Chicago",
                state: "IL",
                zip: "60601",
                address: "123 Main St, Chicago, IL 60601",
                capabilities: ["Janitorial", "Floor Care", "Window Cleaning"],
                fitScore: 85,
                status: "qualified",
                createdAt: serverTimestamp()
            },
            {
                businessName: "Elite Maintenance Co",
                contactName: "Sarah Johnson",
                email: "sarah@elitemaint.com",
                phone: "(555) 234-5678",
                city: "Houston",
                state: "TX",
                zip: "77001",
                address: "456 Oak Ave, Houston, TX 77001",
                capabilities: ["HVAC", "Plumbing", "Electrical"],
                fitScore: 92,
                status: "pending_review",
                createdAt: serverTimestamp()
            },
            {
                businessName: "Facility Solutions LLC",
                contactName: "Mike Davis",
                email: "mike@facilitysolutions.com",
                phone: "(555) 345-6789",
                city: "Phoenix",
                state: "AZ",
                zip: "85001",
                address: "789 Pine Rd, Phoenix, AZ 85001",
                capabilities: ["General Maintenance", "Landscaping", "Snow Removal"],
                fitScore: 78,
                status: "pending_review",
                createdAt: serverTimestamp()
            },
            {
                businessName: "Quick Fix Contractors",
                contactName: "Lisa Martinez",
                email: "lisa@quickfix.com",
                phone: "(555) 456-7890",
                city: "Philadelphia",
                state: "PA",
                zip: "19019",
                address: "321 Elm St, Philadelphia, PA 19019",
                capabilities: ["Carpentry", "Painting", "Drywall"],
                fitScore: 88,
                status: "qualified",
                createdAt: serverTimestamp()
            },
            {
                businessName: "Green Clean Services",
                contactName: "Tom Wilson",
                email: "tom@greenclean.com",
                phone: "(555) 567-8901",
                city: "San Antonio",
                state: "TX",
                zip: "78201",
                address: "654 Maple Dr, San Antonio, TX 78201",
                capabilities: ["Eco-Friendly Cleaning", "Janitorial", "Carpet Cleaning"],
                fitScore: 81,
                status: "pending_review",
                createdAt: serverTimestamp()
            },
            {
                businessName: "Pro Plumbing & HVAC",
                contactName: "Robert Brown",
                email: "robert@proplumbing.com",
                phone: "(555) 678-9012",
                city: "Dallas",
                state: "TX",
                zip: "75201",
                address: "987 Cedar Ln, Dallas, TX 75201",
                capabilities: ["Plumbing", "HVAC", "Water Heaters"],
                fitScore: 90,
                status: "qualified",
                createdAt: serverTimestamp()
            },
            {
                businessName: "Sparkle Janitorial",
                contactName: "Jennifer Lee",
                email: "jennifer@sparklejan.com",
                phone: "(555) 789-0123",
                city: "Austin",
                state: "TX",
                zip: "78701",
                address: "147 Birch Ave, Austin, TX 78701",
                capabilities: ["Janitorial", "Deep Cleaning", "Disinfection"],
                fitScore: 76,
                status: "pending_review",
                createdAt: serverTimestamp()
            },
            {
                businessName: "All-Star Electrical",
                contactName: "David Kim",
                email: "david@allstarelectric.com",
                phone: "(555) 890-1234",
                city: "Denver",
                state: "CO",
                zip: "80201",
                address: "258 Spruce St, Denver, CO 80201",
                capabilities: ["Electrical", "Lighting", "Generators"],
                fitScore: 87,
                status: "qualified",
                createdAt: serverTimestamp()
            }
        ];

        window.seedVendors = async function() {
            const output = document.getElementById('output');
            const btn = document.getElementById('seedBtn');
            
            output.innerHTML = 'üå± Starting vendor seed...\n\n';
            btn.disabled = true;
            
            try {
                const vendorsRef = collection(db, 'vendors');
                
                for (const vendor of testVendors) {
                    const docRef = await addDoc(vendorsRef, vendor);
                    output.innerHTML += `<span class="success">‚úÖ Added: ${vendor.businessName} (ID: ${docRef.id})</span>\n`;
                }
                
                output.innerHTML += `\n<span class="success">üéâ Successfully seeded ${testVendors.length} test vendors!</span>\n`;
                output.innerHTML += `\nView them at: <a href="http://localhost:3001/supply/crm" target="_blank">http://localhost:3001/supply/crm</a>`;
                
            } catch (error) {
                output.innerHTML += `\n<span class="error">‚ùå Error: ${error.message}</span>\n`;
                console.error('Seed error:', error);
            } finally {
                btn.disabled = false;
            }
        };

        window.clearOutput = function() {
            document.getElementById('output').innerHTML = '';
        };
    </script>
</body>
</html>
