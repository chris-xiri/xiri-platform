/**
 * Seed outreach email templates to Firestore
 * Run: node scripts/seed-email-templates.js
 *
 * Templates use merge fields: {{vendorName}}, {{contactName}}, {{city}}, {{state}}, {{services}}, {{specialty}}, {{onboardingUrl}}
 */

const admin = require('firebase-admin');
admin.initializeApp({
    credential: admin.credential.applicationDefault(),
    projectId: 'xiri-facility-solutions',
});
const db = admin.firestore();

const TEMPLATES = [
    {
        id: 'vendor_outreach_1',
        name: 'Initial Outreach',
        description: 'First contact â€” introduce Xiri value prop and drive to onboarding form.',
        category: 'vendor_email',
        sequence: 1,
        subject: 'Site Partnership: {{vendorName}} // {{city}}, {{state}}',
        body: `{{contactName}},

Running a crew in {{city}} takes real skill â€” bidding, chasing checks, managing clients on top of the actual work. That admin ceiling caps growth for most operators.

Xiri Facility Solutions is a facility management brokerage placing insured {{specialty}} contractors on recurring contracts at medical offices and single-tenant commercial sites (1kâ€“10k sq. ft.) across your area. We don't compete with you â€” we fill your calendar and handle the paperwork.

Here's what working with Xiri looks like:

âœ… We source the sites and negotiate the contracts â€” you just show up and deliver.
âœ… Invoices are auto-generated by our system. You get paid on the 10th, every month.
âœ… No account management. We handle the client relationship end-to-end.
âœ… Think of us as your outsourced sales office â€” we grow your revenue per hour, not your overhead.

We only partner with registered entities carrying General Liability and Workers' Comp â€” this is the baseline for our medical-grade site access. That's the standard our clients require, and we hold it firm.

If {{vendorName}} is insured and ready to take on consistent work without the sales grind, complete our 5-minute Capacity & Compliance Profile here:

ðŸ‘‰ {{onboardingUrl}}

It gets you into our system for upcoming site assignments in {{city}}.

â€” Chris Leung
Xiri Facility Solutions
chris@xiri.ai

Â¿Habla espaÃ±ol? Nuestro formulario estÃ¡ disponible en espaÃ±ol.`,
        updatedAt: new Date(),
    },
    {
        id: 'vendor_outreach_2',
        name: 'Follow-Up 1 (Day 3)',
        description: 'Gentle nudge 3 days after initial outreach â€” reinforce the billing pain point.',
        category: 'vendor_email',
        sequence: 2,
        subject: 'Re: Site Partnership // {{vendorName}}',
        body: `{{contactName}},

Circling back on my note from a few days ago.

Most operators we talk to are doing great work â€” the bottleneck is always on the billing and sales side. Chasing payments, writing proposals, following up with clients. That's hours every week that don't show up on any invoice.

That's the exact problem Xiri is built to solve for {{specialty}} contractors like you.

Our system auto-generates invoices on your behalf and pays you on the 10th â€” no chasing, no disputes. You focus on {{city}} sites; we handle everything else.

If you're insured and interested in adding recurring, hassle-free assignments, the 5-minute Capacity & Compliance Profile takes care of getting you into our system:

ðŸ‘‰ {{onboardingUrl}}

Happy to answer any questions â€” just reply here.

â€” Chris Leung
Xiri Facility Solutions

Â¿Habla espaÃ±ol? Nuestro formulario estÃ¡ disponible en espaÃ±ol.`,
        updatedAt: new Date(),
    },
    {
        id: 'vendor_outreach_3',
        name: 'Follow-Up 2 (Day 7)',
        description: 'Social proof angle â€” 7 days after initial outreach.',
        category: 'vendor_email',
        sequence: 3,
        subject: 'Contractors in {{city}} are picking up new sites â€” {{vendorName}}',
        body: `{{contactName}},

Other {{specialty}} contractors in {{city}} are already live with us â€” picking up recurring assignments without any of the usual sales work.

If the timing has just been off, I get it. But if there's a question about how it works, I'm happy to break it down.

The short version: Xiri places you on contracts at medical offices and commercial sites in your area. We handle billing, client relations, and compliance paperwork. You deliver the service.

We require proof of General Liability and Workers' Comp insurance â€” that's the access key for our institutional sites, non-negotiable. If you're already insured and operating a legal entity, you're exactly who we're looking for.

Five minutes to get in the system:
ðŸ‘‰ {{onboardingUrl}}

â€” Chris Leung
Xiri Facility Solutions
chris@xiri.ai

Â¿Habla espaÃ±ol? Nuestro formulario estÃ¡ disponible en espaÃ±ol.`,
        updatedAt: new Date(),
    },
    {
        id: 'vendor_outreach_4',
        name: 'Follow-Up 3 â€” Final (Day 14)',
        description: 'Closing the loop â€” final "breakup" email. Low pressure, leave the door open.',
        category: 'vendor_email',
        sequence: 4,
        subject: 'Closing the loop â€” {{vendorName}}',
        body: `{{contactName}},

I'll keep this short â€” I don't want to keep hitting your inbox if the timing isn't right.

If you're at capacity or not looking to take on new work right now, no problem. I'll step back.

But if you're open to it down the road â€” consistent site assignments, auto-billing, paid on the 10th â€” the profile link stays open:

ðŸ‘‰ {{onboardingUrl}}

We work exclusively with insured entities, so whenever you're ready, that one's on you.

Either way, good luck out there.

â€” Chris Leung
Xiri Facility Solutions
chris@xiri.ai

Â¿Habla espaÃ±ol? Nuestro formulario estÃ¡ disponible en espaÃ±ol.`,
        updatedAt: new Date(),
    }
];

async function seed() {
    console.log('Seeding outreach email templates...');
    for (const t of TEMPLATES) {
        await db.collection('templates').doc(t.id).set(t, { merge: true });
        console.log(`  âœ… ${t.id}: ${t.name}`);
    }
    console.log('\nDone!');
}

seed().catch(e => { console.error(e); process.exit(1); });
